{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react'\n\ninterface FileAreaInputProps {\n  container: React.ReactElement\n  setColorData: React.Dispatch<React.SetStateAction<any>>\n  dropActiveClass? : string\n  imageBaseData?: React.Dispatch<React.SetStateAction<any>>\n}\n\ninterface FileButtonInputProps {\n  button: React.ReactElement\n  setColorData: React.Dispatch<React.SetStateAction<any>>\n  imageBaseData?: React.Dispatch<React.SetStateAction<any>>\n}\n\n\nexport const FileAreaInput = ({\n  container,\n  setColorData,\n  dropActiveClass,\n  imageBaseData\n}: FileAreaInputProps) => {\n  const [hexValue, setHexValue] = React.useState<string>()\n  const [activeDrop, setActiveDrop] = React.useState<boolean>(false)\n\n  React.useEffect(() => {\n    setColorData(hexValue)\n  }, [hexValue])\n\n  const handleFile = (event: React.DragEvent<HTMLDivElement>) => {\n    event.preventDefault()\n    if(imageBaseData !== undefined){\n      var base64 = getBase64(event.dataTransfer.files[0])\n      base64.onload = function () {\n        imageBaseData(base64.result)\n      }\n    }\n    getMainColor(event.dataTransfer.files[0], setHexValue)\n  }\n\n  return (\n    <div\n    className={activeDrop ? dropActiveClass : \"\" }\n    style={{width: \"fit-content\", height: \"fit-content\"}}\n    onDragOver={(e) => {\n      setActiveDrop(true)\n      e.preventDefault();\n    }}\n    onDragLeave={(e) => {\n      setActiveDrop(false)\n      e.preventDefault();\n    }}\n      onDrop={(e) => handleFile(e)}\n    >\n      {container}\n    </div>\n  )\n}\n\n\nexport const FileButtonInput = ({\n  button,\n  setColorData,\n  imageBaseData\n}: FileButtonInputProps) => {\n  const [hexValue, setHexValue] = React.useState<string>()\n  const buttonRef = React.useRef<any>()\n\n  React.useEffect(() => {\n    setColorData(hexValue)\n  }, [hexValue])\n\n  const handleClick = () => {\n    if (buttonRef.current !== undefined) {\n      buttonRef.current.click()\n    }\n  }\n\n  const handleFile = (event: any) => {\n    if(imageBaseData !== undefined){\n      var base64 = getBase64(event.target.files[0])\n      base64.onload = function () {\n        imageBaseData(base64.result)\n      }\n    }\n    getMainColor(event.target.files[0], setHexValue)\n  }\n\n  return (\n    <div>\n      <div role='button' onClick={handleClick}>\n        {button}\n      </div>\n      <input\n        type='file'\n        accept='.jpg, .png'\n        onChange={handleFile}\n        ref={buttonRef}\n        style={{ display: 'none' }}\n      />\n    </div>\n  )\n}\n\nfunction getMainColor(\n  file: File,\n  setHexValue: React.Dispatch<React.SetStateAction<string>>\n) {\n  var base64 = getBase64(file)\n  base64.onload = function () {\n    getAverageRGB(base64.result).then((values) => {\n      setHexValue(RGBToHex(values.r, values.g, values.b))\n    })\n  }\n}\n\nfunction getBase64(file: File) {\n  var reader = new FileReader()\n  reader.readAsDataURL(file)\n  return reader\n}\n\nasync function getAverageRGB(imgBase: any) {\n  var dimensions = { w: 0, h: 0 }\n  dimensions = await getImageDimensions(imgBase)\n\n  var imgEl = document.createElement('img')\n  imgEl.src = imgBase\n\n  var blockSize = 5,\n    defaultRGB = { r: 0, g: 0, b: 0 },\n    canvas = document.createElement('canvas'),\n    context = canvas.getContext && canvas.getContext('2d'),\n    data,\n    width,\n    height,\n    i = -4,\n    length,\n    rgb = { r: 0, g: 0, b: 0 },\n    count = 0\n\n  if (!context) {\n    return defaultRGB\n  }\n\n  height = canvas.height = dimensions.h\n  width = canvas.width = dimensions.w\n\n  context.drawImage(imgEl, 0, 0)\n\n  try {\n    data = context.getImageData(0, 0, width, height)\n  } catch (e) {\n    console.log(e)\n    alert('x')\n    return defaultRGB\n  }\n\n  length = data.data.length\n\n  while ((i += blockSize * 4) < length) {\n    ++count\n    rgb.r += data.data[i]\n    rgb.g += data.data[i + 1]\n    rgb.b += data.data[i + 2]\n  }\n\n  rgb.r = ~~(rgb.r / count)\n  rgb.g = ~~(rgb.g / count)\n  rgb.b = ~~(rgb.b / count)\n  return rgb\n}\n\nfunction getImageDimensions(file: any): any {\n  return new Promise(function (resolved) {\n    var i = new Image()\n    i.onload = function () {\n      resolved({ w: i.width, h: i.height })\n    }\n    i.src = file\n  })\n}\n\nfunction RGBToHex(r: any, g: any, b: any) {\n  r = r.toString(16)\n  g = g.toString(16)\n  b = b.toString(16)\n\n  if (r.length == 1) r = '0' + r\n  if (g.length == 1) g = '0' + g\n  if (b.length == 1) b = '0' + b\n\n  return '#' + r + g + b\n}\n"],"names":["FileAreaInput","container","setColorData","dropActiveClass","imageBaseData","hexValue","setHexValue","React","activeDrop","setActiveDrop","handleFile","event","preventDefault","undefined","base64","getBase64","dataTransfer","files","onload","result","getMainColor","className","style","width","height","onDragOver","e","onDragLeave","onDrop","FileButtonInput","button","buttonRef","handleClick","current","click","target","role","onClick","type","accept","onChange","ref","display","file","getAverageRGB","then","values","RGBToHex","r","g","b","reader","FileReader","readAsDataURL","imgBase","dimensions","w","h","getImageDimensions","imgEl","document","createElement","src","blockSize","defaultRGB","canvas","context","getContext","data","i","length","rgb","count","drawImage","getImageData","console","log","alert","Promise","resolved","Image","toString"],"mappings":"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"}