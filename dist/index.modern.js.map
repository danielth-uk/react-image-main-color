{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react'\n\ninterface FileAreaInputProps {\n  container: React.ReactElement\n  setColorData: React.Dispatch<React.SetStateAction<any>>\n  dropActiveClass? : string\n  imageBaseData?: React.Dispatch<React.SetStateAction<any>>\n}\n\ninterface FileButtonInputProps {\n  button: React.ReactElement\n  setColorData: React.Dispatch<React.SetStateAction<any>>\n  imageBaseData?: React.Dispatch<React.SetStateAction<any>>\n}\n\n\nexport const FileAreaInput = ({\n  container,\n  setColorData,\n  dropActiveClass,\n  imageBaseData\n}: FileAreaInputProps) => {\n  const [hexValue, setHexValue] = React.useState<string>()\n  const [activeDrop, setActiveDrop] = React.useState<boolean>(false)\n\n  React.useEffect(() => {\n    setColorData(hexValue)\n  }, [hexValue])\n\n  const handleFile = (event: React.DragEvent<HTMLDivElement>) => {\n    event.preventDefault()\n    if(imageBaseData !== undefined){\n      var base64 = getBase64(event.dataTransfer.files[0])\n      base64.onload = function () {\n        imageBaseData(base64.result)\n      }\n    }\n    getMainColor(event.dataTransfer.files[0], setHexValue)\n  }\n\n  return (\n    <div\n    className={activeDrop ? dropActiveClass : \"\" }\n    style={{width: \"fit-content\", height: \"fit-content\"}}\n    onDragOver={(e) => {\n      setActiveDrop(true)\n      e.preventDefault();\n    }}\n    onDragLeave={(e) => {\n      setActiveDrop(false)\n      e.preventDefault();\n    }}\n      onDrop={(e) => handleFile(e)}\n    >\n      {container}\n    </div>\n  )\n}\n\n\nexport const FileButtonInput = ({\n  button,\n  setColorData,\n  imageBaseData\n}: FileButtonInputProps) => {\n  const [hexValue, setHexValue] = React.useState<string>()\n  const buttonRef = React.useRef<any>()\n\n  React.useEffect(() => {\n    setColorData(hexValue)\n  }, [hexValue])\n\n  const handleClick = () => {\n    if (buttonRef.current !== undefined) {\n      buttonRef.current.click()\n    }\n  }\n\n  const handleFile = (event: any) => {\n    if(imageBaseData !== undefined){\n      var base64 = getBase64(event.target.files[0])\n      base64.onload = function () {\n        imageBaseData(base64.result)\n      }\n    }\n    getMainColor(event.target.files[0], setHexValue)\n  }\n\n  return (\n    <div>\n      <div role='button' onClick={handleClick}>\n        {button}\n      </div>\n      <input\n        type='file'\n        accept='.jpg, .png'\n        onChange={handleFile}\n        ref={buttonRef}\n        style={{ display: 'none' }}\n      />\n    </div>\n  )\n}\n\nfunction getMainColor(\n  file: File,\n  setHexValue: React.Dispatch<React.SetStateAction<string>>\n) {\n  var base64 = getBase64(file)\n  base64.onload = function () {\n    getAverageRGB(base64.result).then((values) => {\n      setHexValue(RGBToHex(values.r, values.g, values.b))\n    })\n  }\n}\n\nfunction getBase64(file: File) {\n  var reader = new FileReader()\n  reader.readAsDataURL(file)\n  return reader\n}\n\nasync function getAverageRGB(imgBase: any) {\n  var dimensions = { w: 0, h: 0 }\n  dimensions = await getImageDimensions(imgBase)\n\n  var imgEl = document.createElement('img')\n  imgEl.src = imgBase\n\n  var blockSize = 5,\n    defaultRGB = { r: 0, g: 0, b: 0 },\n    canvas = document.createElement('canvas'),\n    context = canvas.getContext && canvas.getContext('2d'),\n    data,\n    width,\n    height,\n    i = -4,\n    length,\n    rgb = { r: 0, g: 0, b: 0 },\n    count = 0\n\n  if (!context) {\n    return defaultRGB\n  }\n\n  height = canvas.height = dimensions.h\n  width = canvas.width = dimensions.w\n\n  context.drawImage(imgEl, 0, 0)\n\n  try {\n    data = context.getImageData(0, 0, width, height)\n  } catch (e) {\n    console.log(e)\n    alert('x')\n    return defaultRGB\n  }\n\n  length = data.data.length\n\n  while ((i += blockSize * 4) < length) {\n    ++count\n    rgb.r += data.data[i]\n    rgb.g += data.data[i + 1]\n    rgb.b += data.data[i + 2]\n  }\n\n  rgb.r = ~~(rgb.r / count)\n  rgb.g = ~~(rgb.g / count)\n  rgb.b = ~~(rgb.b / count)\n  return rgb\n}\n\nfunction getImageDimensions(file: any): any {\n  return new Promise(function (resolved) {\n    var i = new Image()\n    i.onload = function () {\n      resolved({ w: i.width, h: i.height })\n    }\n    i.src = file\n  })\n}\n\nfunction RGBToHex(r: any, g: any, b: any) {\n  r = r.toString(16)\n  g = g.toString(16)\n  b = b.toString(16)\n\n  if (r.length == 1) r = '0' + r\n  if (g.length == 1) g = '0' + g\n  if (b.length == 1) b = '0' + b\n\n  return '#' + r + g + b\n}\n"],"names":["getAverageRGB","imgBase","blockSize","defaultRGB","canvas","context","data","width","height","i","length","rgb","count","dimensions","w","h","getImageDimensions","imgEl","document","createElement","src","r","g","b","getContext","drawImage","getImageData","e","console","log","alert","FileAreaInput","container","setColorData","dropActiveClass","imageBaseData","React","hexValue","setHexValue","activeDrop","setActiveDrop","handleFile","event","preventDefault","undefined","base64","getBase64","dataTransfer","files","onload","result","getMainColor","className","style","onDragOver","onDragLeave","onDrop","FileButtonInput","button","buttonRef","handleClick","current","click","target","role","onClick","type","accept","onChange","ref","display","file","then","values","RGBToHex","reader","FileReader","readAsDataURL","Promise","resolved","Image","toString"],"mappings":"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"}